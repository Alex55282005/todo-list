{"ast":null,"code":"var _jsxFileName = \"/home/b1ame/hillel/DZ/dz14/HW12/src/components/StickerList.jsx\",\n    _s = $RefreshSig$();\n\nimport StickerItem from \"./StickerItem\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useAsync } from \"../hooks/common\";\nimport { getStickers, createSticker, deleteSticker, updateSticker } from \"../services/stickers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function StickerList() {\n  _s();\n\n  const {\n    run,\n    data: stickers,\n    setData: setStickers\n  } = useAsync(getStickers, []);\n  let styleStick = 0;\n  const [edit, setEdit] = useState();\n  const [newDescription, setNewDescription] = useState();\n  const [showModal, setShowModal] = useState(false);\n  const [btnTheme, setBtnTheme] = useState(\"switch-btn\");\n  const [boardTheme, setBoardTheme] = useState(\"board\");\n  const [stickerTheme, setStickerTheme] = useState(\"stick_light_\");\n  useEffect(() => run(), []);\n\n  function stickStile() {\n    styleStick += 1;\n\n    if (styleStick === 4) {\n      styleStick = 1;\n    }\n\n    return \"sticker \" + stickerTheme + styleStick;\n  }\n\n  function onDeleteButtonClick(id) {\n    deleteSticker(id);\n    const newStickers = stickers.filter(sticker => sticker.id !== id);\n    setStickers(newStickers);\n  }\n\n  function onSaveSticker(id, description) {\n    const sticker = stickers.find(sticker => sticker.id === id);\n    const newSticker = { ...sticker,\n      description: newDescription\n    };\n\n    if (description !== newDescription) {\n      updateSticker(newSticker);\n      setStickers(stickers.map(sticker => sticker.id === id ? newSticker : sticker));\n    }\n\n    setEdit(undefined);\n  }\n\n  const onAddStickerClick = useCallback(() => {\n    const newStick = {\n      description: \"New note\"\n    };\n    createSticker(newStick).then(data => setStickers(prevStickers => [...prevStickers, data]));\n  }, [setStickers]);\n\n  function onStickerClick(id, description) {\n    if (edit === undefined) {\n      setEdit(id);\n    } else {\n      if (edit === id) {\n        onEditChange();\n        onSaveSticker(id, description);\n      }\n    }\n  }\n\n  function onEditChange(e) {\n    setNewDescription(e.target.value);\n  }\n\n  function onModalStyle() {\n    const className = \"modal\";\n\n    if (showModal) {\n      return className + \" modalShow\";\n    } else {\n      return className + \" modalHide\";\n    }\n  }\n\n  function onShowModal() {\n    if (edit !== undefined) {\n      setShowModal(true);\n    }\n  }\n\n  function onModalCancelClick() {\n    setShowModal(false);\n    setEdit(undefined);\n  }\n\n  function onModalSaveClick() {\n    setShowModal(false);\n    onSaveSticker(edit);\n  }\n\n  function onSwitchClick() {\n    if (btnTheme === \"switch-btn\") {\n      setBtnTheme(btnTheme + \" switch-on\");\n      setBoardTheme(boardTheme + \" board_dark\");\n      setStickerTheme(\"stick_\");\n    } else {\n      setBtnTheme(\"switch-btn\");\n      setBoardTheme(\"board\");\n      setStickerTheme(stickerTheme + \"light_\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: boardTheme,\n    children: [stickers.map(sticker => /*#__PURE__*/_jsxDEV(StickerItem, {\n      style: stickStile(),\n      item: sticker,\n      onStickerClick: onStickerClick,\n      isEdit: edit,\n      onEditChange: onEditChange,\n      onDeleteButtonClick: onDeleteButtonClick,\n      onShowModal: onShowModal\n    }, sticker.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: onModalStyle(),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Do you want save changes?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onModalCancelClick,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onModalSaveClick,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toolsBoard\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addStick\",\n        onClick: onAddStickerClick,\n        children: \"+ Add stick\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: btnTheme,\n        onClick: onSwitchClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n}\n\n_s(StickerList, \"JcBQhl+v98RWANiDSB1DQHqXU2s=\", false, function () {\n  return [useAsync];\n});\n\n_c = StickerList;\n\nvar _c;\n\n$RefreshReg$(_c, \"StickerList\");","map":{"version":3,"sources":["/home/b1ame/hillel/DZ/dz14/HW12/src/components/StickerList.jsx"],"names":["StickerItem","useCallback","useEffect","useState","useAsync","getStickers","createSticker","deleteSticker","updateSticker","StickerList","run","data","stickers","setData","setStickers","styleStick","edit","setEdit","newDescription","setNewDescription","showModal","setShowModal","btnTheme","setBtnTheme","boardTheme","setBoardTheme","stickerTheme","setStickerTheme","stickStile","onDeleteButtonClick","id","newStickers","filter","sticker","onSaveSticker","description","find","newSticker","map","undefined","onAddStickerClick","newStick","then","prevStickers","onStickerClick","onEditChange","e","target","value","onModalStyle","className","onShowModal","onModalCancelClick","onModalSaveClick","onSwitchClick"],"mappings":"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","sourcesContent":["import StickerItem from \"./StickerItem\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { useAsync } from \"../hooks/common\";\r\nimport {\r\n  getStickers,\r\n  createSticker,\r\n  deleteSticker,\r\n  updateSticker,\r\n} from \"../services/stickers\";\r\n\r\nexport default function StickerList() {\r\n  const {\r\n    run,\r\n    data: stickers,\r\n    setData: setStickers,\r\n  } = useAsync(getStickers, []);\r\n\r\n  let styleStick = 0;\r\n  const [edit, setEdit] = useState();\r\n  const [newDescription, setNewDescription] = useState();\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [btnTheme, setBtnTheme] = useState(\"switch-btn\");\r\n  const [boardTheme, setBoardTheme] = useState(\"board\");\r\n  const [stickerTheme, setStickerTheme] = useState(\"stick_light_\");\r\n\r\n  useEffect(() => run(), []);\r\n\r\n  function stickStile() {\r\n    styleStick += 1;\r\n    if (styleStick === 4) {\r\n      styleStick = 1;\r\n    }\r\n    return \"sticker \" + stickerTheme + styleStick;\r\n  }\r\n\r\n  function onDeleteButtonClick(id) {\r\n    deleteSticker(id);\r\n    const newStickers = stickers.filter((sticker) => sticker.id !== id);\r\n    setStickers(newStickers);\r\n  }\r\n\r\n  function onSaveSticker(id, description) {\r\n    const sticker = stickers.find((sticker) => sticker.id === id);\r\n    const newSticker = { ...sticker, description: newDescription };\r\n    if (description !== newDescription) {\r\n      updateSticker(newSticker);\r\n      setStickers(\r\n        stickers.map((sticker) => (sticker.id === id ? newSticker : sticker))\r\n      );\r\n    }\r\n    setEdit(undefined);\r\n  }\r\n\r\n  const onAddStickerClick = useCallback(() => {\r\n    const newStick = {\r\n      description: \"New note\",\r\n    };\r\n    createSticker(newStick).then((data) =>\r\n      setStickers((prevStickers) => [...prevStickers, data])\r\n    );\r\n  }, [setStickers]);\r\n\r\n  function onStickerClick(id, description) {\r\n    if (edit === undefined) {\r\n      setEdit(id);\r\n    } else {\r\n      if (edit === id) {\r\n        onEditChange();\r\n        onSaveSticker(id, description);\r\n      }\r\n    }\r\n  }\r\n\r\n  function onEditChange(e) {\r\n    setNewDescription(e.target.value);\r\n  }\r\n\r\n  function onModalStyle() {\r\n    const className = \"modal\";\r\n    if (showModal) {\r\n      return className + \" modalShow\";\r\n    } else {\r\n      return className + \" modalHide\";\r\n    }\r\n  }\r\n\r\n  function onShowModal() {\r\n    if (edit !== undefined) {\r\n      setShowModal(true);\r\n    }\r\n  }\r\n\r\n  function onModalCancelClick() {\r\n    setShowModal(false);\r\n    setEdit(undefined);\r\n  }\r\n\r\n  function onModalSaveClick() {\r\n    setShowModal(false);\r\n    onSaveSticker(edit);\r\n  }\r\n\r\n  function onSwitchClick() {\r\n    if (btnTheme === \"switch-btn\") {\r\n      setBtnTheme(btnTheme + \" switch-on\");\r\n      setBoardTheme(boardTheme + \" board_dark\");\r\n      setStickerTheme(\"stick_\");\r\n    } else {\r\n      setBtnTheme(\"switch-btn\");\r\n      setBoardTheme(\"board\");\r\n      setStickerTheme(stickerTheme + \"light_\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={boardTheme}>\r\n      {stickers.map((sticker) => (\r\n        <StickerItem\r\n          style={stickStile()}\r\n          key={sticker.id}\r\n          item={sticker}\r\n          onStickerClick={onStickerClick}\r\n          isEdit={edit}\r\n          onEditChange={onEditChange}\r\n          onDeleteButtonClick={onDeleteButtonClick}\r\n          onShowModal={onShowModal}\r\n        />\r\n      ))}\r\n      <div className={onModalStyle()}>\r\n        <div className=\"modal-content\">\r\n          <p>Do you want save changes?</p>\r\n          <div className=\"modal-buttons\">\r\n            <button onClick={onModalCancelClick}>Cancel</button>\r\n            <button onClick={onModalSaveClick}>Save</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"toolsBoard\">\r\n        <button className=\"addStick\" onClick={onAddStickerClick}>\r\n          + Add stick\r\n        </button>\r\n        <div className={btnTheme} onClick={onSwitchClick}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}